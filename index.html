<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jsDelivr CDN加速URL</title>
    <style>
        /* 页面整体样式 */
        body {
            font-family: Arial, sans-serif; /* 字体样式 */
            margin: 0;
            padding: 20px;
            background-color: #e0f7fa; /* 背景颜色 */
            background-image: 
                linear-gradient(90deg, rgba(255, 255, 255, 0.5) 1px, transparent 1px),
                linear-gradient(0deg, rgba(255, 255, 255, 0.5) 1px, transparent 1px);
            background-size: 20px 20px; /* 网格大小 */
            background-position: 0 0, 0 0;
            text-align: center; /* 文本居中 */
        }

        /* 标题样式 */
        h1 {
            font-size: 3em; /* 字体大小 */
            margin-bottom: 20px; /* 下方外边距 */
            background-image: linear-gradient(45deg, red, yellow, green, cyan, blue, magenta, red);
            background-size: 400% 400%; /* 渐变背景的动态效果 */
            animation: gradient 10s ease infinite; /* 动画设置 */
            -webkit-background-clip: text; /* 裁剪背景到文本 */
            color: transparent; /* 设置文本透明以显示背景 */
        }

        /* 背景动画效果 */
        @keyframes gradient {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        /* 文本框通用样式 */
        textarea {
            width: 100%; /* 宽度100% */
            max-width: 800px; /* 最大宽度800px */
            margin-bottom: 10px; /* 下方外边距 */
            padding: 10px; /* 内边距 */
            font-size: 14px; /* 字体大小 */
            border-radius: 5px; /* 圆角边框 */
            border: 1px solid #ccc; /* 边框颜色 */
            box-sizing: border-box; /* 包含内边距和边框的宽度计算 */
            resize: none; /* 允许垂直调整大小 */
			overflow-y: auto; /* 自动显示垂直滚动条 */
        }

        /* 输入框和输出框的最小高度 */
        #input, #output {
            min-height: 180px;
        }

        /* 按钮样式 */
        button {
            padding: 10px 20px; /* 内边距 */
            background-color: #007bff; /* 背景颜色 */
            color: white; /* 字体颜色 */
            border: none; /* 无边框 */
            cursor: pointer; /* 鼠标指针样式 */
            font-size: 16px; /* 字体大小 */
            border-radius: 5px; /* 圆角 */
            margin-top: 10px; /* 顶部外边距 */
            width: auto; /* 自动宽度 */
            max-width: 200px; /* 最大宽度 */
        }

        /* 按钮悬停样式 */
        button:hover {
            background-color: #0056b3; /* 改变背景颜色 */
        }

        /* 复制按钮的特定样式 */
        button#copy {
            background-color: #28a745;
        }

        /* 复制按钮悬停样式 */
        button#copy:hover {
            background-color: #218838;
        }

        /* 输出区的额外样式 */
        .output {
            margin-top: 20px; /* 上方外边距 */
        }

        /* 响应式设计：适配小屏幕 */
        @media (max-width: 800px) {
            body {
                padding: 15px; /* 减小页面内边距 */
            }
            h1 {
                font-size: 2em; /* 缩小标题字体 */
            }
            textarea {
                font-size: 12px; /* 缩小字体大小 */
                width: 100%; /* 保持全宽 */
                height: 100px; /* 固定高度 */
                min-height: 100px; /* 设置最小高度 */
            }
            button {
                font-size: 16px; /* 保持按钮字体大小 */
                width: 30%; /* 调整按钮宽度 */
                max-width: none; /* 去掉最大宽度限制 */
            }
        }
    </style>
</head>
<body>

    <h1>jsDelivr CDN加速URL</h1>

    <!-- 输入框：用户粘贴GitHub-Raw链接 -->
    <textarea id="input" placeholder="GitHub-Raw URL"></textarea><br>
    <!-- 转换按钮 -->
    <button id="convert">转换</button>

    <div class="output">
        <!-- 输出框：显示转换后的jsDelivr链接 -->
        <textarea id="output" readonly placeholder="jsDelivr-CDN URL"></textarea><br>
        <!-- 复制按钮 -->
        <button id="copy">复制</button>
    </div>

    <script>
        /**
         * 将GitHub-Raw链接转换为jsDelivr CDN链接
         * @param {string} url - 输入的GitHub-Raw链接
         * @returns {string} 转换后的jsDelivr CDN链接或错误提示
         */
        function convertGitHubToJsDelivr(url) {
            // 匹配GitHub-Raw链接的正则表达式
            const regex = /https:\/\/raw\.githubusercontent\.com\/([^\/]+)\/([^\/]+)\/([^\/]+)\/(.+)/;
            const match = url.match(regex); // 执行正则匹配

            if (match) {
                // 解构匹配结果，分别获取用户名、仓库名、分支名和文件路径
                const [, user, repo, branch, filePath] = match;
                // 返回jsDelivr格式的链接
                return `https://cdn.jsdelivr.net/gh/${user}/${repo}@${branch}/${filePath}`;
            }

            // 如果输入不符合格式，返回错误提示
            return `无效的 GitHub-Raw URL: ${url}`;
        }

        // 为“转换”按钮绑定点击事件
        document.getElementById("convert").addEventListener("click", function() {
            const input = document.getElementById("input").value.trim(); // 获取并去除输入框内容的首尾空格
            const urls = input.split("\n"); // 按行分割输入的多个链接
            const results = urls.map(url => convertGitHubToJsDelivr(url)); // 转换每个链接
            document.getElementById("output").value = results.join("\n"); // 将结果显示在输出框
        });

        // 为“复制”按钮绑定点击事件
        document.getElementById("copy").addEventListener("click", function() {
            const outputText = document.getElementById("output"); // 获取输出框
            outputText.select(); // 选中内容
            document.execCommand("copy"); // 执行复制操作
            alert("已复制到剪贴板！"); // 提示复制成功
        });
    </script>

</body>
</html>
